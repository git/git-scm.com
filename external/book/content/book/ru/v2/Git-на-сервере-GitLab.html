---
### DO NOT EDIT! Generated by script/update-book2.rb
category: book
section: documentation
subsection: book
sidebar: book
book:
  language_code: ru
  chapter:
    title: Git на сервере
    number: 4
  section:
    title: GitLab
    number: 8
    cs_number: '4.8'
    previous: book/ru/v2/Git-на-сервере-GitWeb
    next: book/ru/v2/Git-на-сервере-Git-хостинг
title: Git - GitLab
url: "/book/ru/v2/Git-на-сервере-GitLab.html"
---
<h2 id="_gitlab">GitLab</h2>
<div class="paragraph">
<p>
GitWeb довольно-таки прост.
Если вам нужен более современный, полнофункциональный Git-сервер, есть несколько решений с открытым исходным кодом, которые можно использовать.
Так как GitLab это один из самых популярных, мы рассмотрим его установку и использование в качестве примера.
Это немного сложнее, чем GitWeb, и скорее всего потребует больше обслуживания, но и функциональность гораздо богаче.</p>
</div>
<div class="sect3">
<h3 id="_установка">Установка</h3>
<div class="paragraph">
<p>GitLab — это веб-приложение на основе базы данных, так что его установка немного сложней, чем у некоторых других серверов Git.
К счастью, этот процесс хорошо документирован и поддерживается.
GitLab настоятельно рекомендует установить GitLab на ваш сервер через официальный пакет Omnibus GitLab.</p>
</div>
<div class="paragraph">
<p>Другие варианты установки:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>GitLab Helm chart для использования с Kubernetes.</p>
</li>
<li>
<p>Официальные образы GitLab для использования с Docker.</p>
</li>
<li>
<p>Из исходных файлов.</p>
</li>
<li>
<p>Облачный провайдер, такой как AWS, Google Cloud Platform, Azure, OpenShift или Digital Ocean.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Для получения дополнительной информации прочтите <a href="https://gitlab.com/gitlab-org/gitlab-foss/-/blob/master/README.md" target="_blank" rel="noopener">GitLab Community Edition (CE) readme</a>.</p>
</div>
</div>
<div class="sect3">
<h3 id="_администрирование">Администрирование</h3>
<div class="paragraph">
<p>Административный интерфейс GitLab доступен через веб.
Просто направьте ваш браузер на имя или IP-адрес хоста, где установлен GitLab, и войдите как администратор.
Имя пользователя по умолчанию <code>admin@local.host</code>, пароль по умолчанию <code>5iveL!fe</code> (вас попросят изменить их при входе).
Войдя, нажмите иконку «Административная зона» в меню справа и сверху.</p>
</div>
<div id="rgitlab_menu" class="imageblock">
<div class="content">
<img src="{{< relurl "book/ru/v2/images/gitlab-menu.png" >}}" alt="Пункт «Административная зона» в меню GitLab">
</div>
<div class="title">Рисунок 50. Пункт «Административная зона» в меню GitLab</div>
</div>
<div class="sect4">
<h4 id="_пользователи">Пользователи</h4>
<div class="paragraph">
<p>Пользователи в GitLab — это учётные записи, соответствующие людям.
Пользовательские учётные записи не очень сложны; в основном это набор персональной информации, прикреплённый к имени.
У каждого пользователя есть <strong>пространство имён</strong>, логически группирующее проекты данного пользователя.
Если у пользователя jane есть проект project, адрес этого проекта будет <code><a href="http://server/jane/project" class="bare">http://server/jane/project</a></code>.</p>
</div>
<div id="rgitlab_users" class="imageblock">
<div class="content">
<img src="{{< relurl "book/ru/v2/images/gitlab-users.png" >}}" alt="Экран управления пользователями GitLab">
</div>
<div class="title">Рисунок 51. Экран управления пользователями GitLab</div>
</div>
<div class="paragraph">
<p>Удаление пользователя может быть выполнено двумя способами.
«Блокирование» («Blocking») пользователя запрещает ему вход в GitLab, но все данные в его пространстве имён сохраняются, и коммиты, подписанные этим пользователем, будут указывать на его профиль.</p>
</div>
<div class="paragraph">
<p>«Разрушение» («Destroying») пользователя, с другой стороны, полностью удаляет его из базы данных и файловой системы.
Все проекты и данные в его пространстве имён удаляются, как и все принадлежащие ему группы.
Конечно, этим более постоянным и разрушительным действием пользуются реже.</p>
</div>
</div>
<div class="sect4">
<h4 id="r_gitlab_groups_section">Группы</h4>
<div class="paragraph">
<p>Группы GitLab — это коллекция проектов с указанием того, как пользователи получают к ним доступ.
Каждая группа имеет пространство имён проектов (так же как и пользователи), так что если в группе training есть проект materials, его адрес будет <code><a href="http://server/training/materials" class="bare">http://server/training/materials</a></code>.</p>
</div>
<div id="rgitlab_groups" class="imageblock">
<div class="content">
<img src="{{< relurl "book/ru/v2/images/gitlab-groups.png" >}}" alt="Экран управления группами GitLab">
</div>
<div class="title">Рисунок 52. Экран управления группами GitLab</div>
</div>
<div class="paragraph">
<p>Каждая группа связана с пользователями, каждый из которых имеет уровень доступа к проектам группы и к самой группе.
Он разнится от «Гостя» («Guest», только проблемы и чат) до «Владельца» («Owner», полный контроль над группой, её членами и проектами).
Типы разрешений слишком обширны, чтобы перечислять их здесь, но на экране управления GitLab есть полезная ссылка с описанием.</p>
</div>
</div>
<div class="sect4">
<h4 id="_проекты">Проекты</h4>
<div class="paragraph">
<p>Проект GitLab примерно соответствует одному git-репозиторию.
Каждый проект принадлежит одному пространству имён, групповому или пользовательскому.
Если проект принадлежит пользователю, владелец контролирует, кто имеет доступ к проекту; если проект принадлежит группе, действуют групповые уровни доступа для пользователей.</p>
</div>
<div class="paragraph">
<p>Каждый проект также имеет уровень видимости, который контролирует, кто имеет доступ на чтение страниц проекта или репозитория.
Если проект <em>Приватный</em> (<em>Private</em>), владелец должен явно дать доступ на чтение отдельным пользователям.
<em>Внутренний</em> (<em>Internal</em>) проект виден любому вошедшему пользователю GitLab, а <em>Публичный</em> (<em>Public</em>) проект видим всем.
Это относится как к доступу <code>git fetch</code>, так и к доступу к проекту через веб-интерфейс.</p>
</div>
</div>
<div class="sect4">
<h4 id="_хуки">Хуки</h4>
<div class="paragraph">
<p>GitLab включает поддержку хуков (перехватчиков, hooks) на уровне проектов и всей системы.
В обоих случаях, когда происходит некоторое событие, сервер GitLab выполняет запрос HTTP POST с осмысленным JSON-содержанием.
Это отличный способ соединить ваши git-репозитории и инсталляцию GitLab с автоматикой инфраструктуры разработки, такой как сервера непрерывной интеграции, комнаты чатов или инструменты деплоя.</p>
</div>
</div>
</div>
<div class="sect3">
<h3 id="_базовое_использование">Базовое использование</h3>
<div class="paragraph">
<p>Первое, чего вы захотите от GitLab, это создать новый проект.
Это достигается нажатием иконки «+» на панели инструментов.
Будут запрошены имя проекта, пространство имён, которому он должен принадлежать, и уровень видимости.
Большинство из этих настроек можно потом изменить через интерфейс настроек.
Нажмите «Создать проект» («Create Project»), чтобы закончить.</p>
</div>
<div class="paragraph">
<p>Когда проект создан, вы, наверное, захотите соединить его с локальным git-репозиторием.
Каждый проект может быть доступен через HTTPS или SSH, каждый из которых может быть использован для указания удалённого репозитория.
Адреса (URL) видимы наверху домашней страницы проекта.
Для существующего локального репозитория, следующая команда создаст удалённый репозиторий с именем <code>gitlab</code> и размещением на сервере:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git remote add gitlab https://server/namespace/project.git</code></pre>
</div>
</div>
<div class="paragraph">
<p>Если у вас нет локального репозитория, можно просто сделать его:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git clone https://server/namespace/project.git</code></pre>
</div>
</div>
<div class="paragraph">
<p>Веб-интерфейс даёт доступ к нескольким полезным видам самого репозитория.
Домашняя страница каждого проекта показывает недавнюю активность, а ссылки наверху ведут на список файлов проекта и журнала коммитов.</p>
</div>
</div>
<div class="sect3">
<h3 id="_совместная_работа">Совместная работа</h3>
<div class="paragraph">
<p>Самый простой метод совместной работы над проектом GitLab — это выдача другому пользователю прямого доступа на запись (push) в git-репозитории.
Вы можете добавить пользователя в проект в разделе «Участники» («Members») настроек проекта, указав уровень доступа (уровни доступа кратко обсуждались в <a href="{{< relurl "book/ru/v2/ch00/r_gitlab_groups_section" >}}">Группы</a>).
Получая уровень доступа «Разработчик» («Developer») или выше, пользователь может беспрепятственно отсылать свои коммиты и ветки непосредственно в репозиторий.</p>
</div>
<div class="paragraph">
<p>Другой, более разобщённый способ совместной работы — использование запросов на слияние (merge requests).
Эта возможность позволяет любому пользователю, который видит проект, вносить свой вклад подконтрольным способом.
Пользователи с прямым доступом могут просто создать ветку, отослать в неё коммиты и открыть запрос на слияние из их ветки обратно в <code>master</code> или любую другую ветку.
Пользователи без доступа на запись могут «форкнуть» репозиторий («fork», создать собственную копию), отправить коммиты в <em>эту</em> копию и открыть запрос на слияние из их форка обратно в основной проект.
Эта модель позволяет владельцу полностью контролировать, что попадает в репозиторий и когда, принимая помощь от недоверенных пользователей.</p>
</div>
<div class="paragraph">
<p>Запросы на слияние и проблемы (issues) это основные единицы долгоживущих дискуссий в GitLab.
Каждый запрос на слияние допускает построчное обсуждение предлагаемого изменения (поддерживая облегчённое рецензирование кода), равно как и общее обсуждение.
И те и другие могут присваиваться пользователям или организовываться в вехи (milestones).</p>
</div>
<div class="paragraph">
<p>Мы в основном сосредоточились на частях GitLab, связанных с git, но это — довольно зрелая система, и она предоставляет много других возможностей, помогающих вашей команде работать совместно, например вики-страницы для проектов и инструменты поддержки системы.
Одно из преимуществ GitLab в том, что, однажды запустив и настроив сервер, вам редко придётся изменять конфигурацию или заходить на него по SSH; большинство административных и пользовательских действий можно выполнять через веб-браузер.</p>
</div>
</div>
<div id="nav"><a href="{{< previous-section >}}">prev</a> | <a href="{{< next-section >}}">next</a></div>