---
### DO NOT EDIT! Generated by script/update-book2.rb
category: book
section: documentation
subsection: book
sidebar: book
book:
  language_code: ru
  chapter:
    title: Распределённый Git
    number: 5
  section:
    title: Распределённый рабочий процесс
    number: 1
    cs_number: '5.1'
    previous: book/ru/v2/Git-на-сервере-Заключение
    next: book/ru/v2/Распределённый-Git-Участие-в-проекте
title: Git - Распределённый рабочий процесс
url: "/book/ru/v2/Распределённый-Git-Распределённый-рабочий-процесс.html"
---
<p>
Теперь, когда вы обзавелись настроенным удалённым Git-репозиторием, т. е. местом, где разработчики могут обмениваться своим кодом, а также познакомились с основными командами Git для локальной работы, мы рассмотрим, как задействовать некоторые распределённые рабочие процессы, предлагаемые Git.</p><p>В этой главе мы рассмотрим работу с Git в распределённой среде как в роли рядового разработчика, так и в роли системного интегратора.
То есть вы научитесь успешно вносить свой код в проект, делая это как можно более просто и для вас, и для владельца проекта, а также научитесь тому, как сопровождать проекты, в которых участвует множество разработчиков.</p>
<h2 id="_распределённый_рабочий_процесс">Распределённый рабочий процесс</h2>
<div class="paragraph">
<p>
В отличие от централизованных систем контроля версий, распределённая природа Git позволяет более гибко взаимодействовать разработчикам в рамках проекта.
В централизованных системах каждый разработчик представляет собой узел, который более или менее одинаково взаимодействует с центральным хабом.
Однако, в Git каждый разработчик это и узел и хаб, то есть каждый разработчик может как отправлять код в другие репозитории, так и поддерживать публичный репозиторий, в который другие разработчики смогут отправлять свой код, взяв его за основу.
Это предоставляет огромное количество вариаций для организации рабочего процесса над проектом и/или для команды, поэтому мы расскажем об основных парадигмах, отражающих преимущество гибкости Git.
Так же мы рассмотрим сильные и слабые стороны каждой из них; вы сможете выбрать наиболее подходящую или позаимствовать необходимые функции сразу из нескольких.</p>
</div>
<div class="sect3">
<h3 id="_централизованная_работа">Централизованная работа</h3>
<div class="paragraph">
<p>
В централизованных системах, как правило, присутствует только одна модель взаимодействия — централизованный рабочий процесс.
Центральный хаб или <em>репозиторий</em> может принимать код, а все остальные синхронизируют свою работу с ним.
Все разработчики являются узлами (пользователями хаба) и синхронизируются только с ним.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="{{< relurl "book/ru/v2/images/centralized_workflow.png" >}}" alt="Централизованный рабочий процесс">
</div>
<div class="title">Рисунок 53. Централизованный рабочий процесс</div>
</div>
<div class="paragraph">
<p>Это означает, что если два разработчика клонируют репозиторий и каждый внесёт изменения, то первый из них сможет отправить свои изменения в репозиторий без проблем.
Второй разработчик должен слить изменения, сделанные первым разработчиком, чтобы избежать их перезаписи во время отправки на сервер.
Эта концепция верна как для Git, так и для Subversion (или любой другой централизованной системы контроля версий), и прекрасно работает в Git.</p>
</div>
<div class="paragraph">
<p>Если в вашей организации или команде уже используется централизованный рабочий процесс, то вам ничего не нужно менять для работы с Git.
Достаточно создать один репозиторий и предоставить каждому члену команды push-доступ; Git не позволит перезаписать изменения, сделанные другими.</p>
</div>
<div class="paragraph">
<p>Предположим, Джон и Джессика начинают работать над проектом одновременно.
Джон вносит изменения и отправляет их на сервер.
Затем Джессика пытается отправить свои изменения, но сервер их отклоняет.
Ей говорят, что она пытается отправить изменения, для которых невозможно выполнить быструю перемотку и она не сможет это сделать пока не получит все новые для неё изменения и не сольёт их.
Такой рабочий процесс привлекает большинство людей, так как реализует парадигму, с которой они уже знакомы.</p>
</div>
<div class="paragraph">
<p>Такой подход применим не только к небольшим командам.
Используя модель ветвления Git, сотни разработчиков могут одновременно работать над одним проектом, используя при этом десятки веток.</p>
</div>
</div>
<div class="sect3">
<h3 id="r_integration_manager">Диспетчер интеграции</h3>
<div class="paragraph">
<p>
Так как Git допускает использование нескольких удалённых репозиториев, то становится возможным организация рабочего процесса, где каждый разработчик имеет доступ на запись в свой публичный репозиторий и доступ на чтение ко всем остальным.
При таком сценарии обычно существует канонический репозиторий, который представляет собой «официальный» проект.
Для отправки своих наработок в этот проект следует создать его клон и отправить изменения в него.
Затем вы отправляете запрос на слияние ваших изменений сопровождающему основного проекта.
В свою очередь он может добавить ваш репозиторий как удалённый, протестировать ваши изменения локально, слить их в соответствующую ветку и отправить в основной репозиторий.
Процесс работает в следующей последовательности (смотри <a href="{{< relurl "book/ru/v2/ch00/rwfdiag_b" >}}">Рабочий процесс с менеджером по интеграции</a>):</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Сопровождающий проекта отправляет изменения в свой публичный репозиторий.</p>
</li>
<li>
<p>Участник клонирует этот репозиторий и вносит изменения.</p>
</li>
<li>
<p>Участник отправляет свои изменения в свой публичный репозиторий.</p>
</li>
<li>
<p>Участник отправляет письмо сопровождающему с запросом на слияние изменений.</p>
</li>
<li>
<p>Сопровождающий добавляет репозиторий участника как удалённый и сливает изменения локально.</p>
</li>
<li>
<p>Сопровождающий отправляет слитые изменения в основной репозиторий.</p>
</li>
</ol>
</div>
<div id="rwfdiag_b" class="imageblock">
<div class="content">
<img src="{{< relurl "book/ru/v2/images/integration-manager.png" >}}" alt="Рабочий процесс с менеджером по интеграции">
</div>
<div class="title">Рисунок 54. Рабочий процесс с менеджером по интеграции</div>
</div>
<div class="paragraph">
<p>
Это достаточно распространённый вид организации рабочего процесса, в котором используются хабы, такие как GitHub или GitLab, где легко создать свой репозиторий как ответвление проекта (fork) и отправить туда свои изменения.
Одним из основных преимуществ этого подхода является то, что вы можете продолжать работать, а сопровождающий основного репозитория может слить ваши изменения в любое время.
Участники не должны ждать пока основной проект примет их изменения — каждый может работать в своём темпе.</p>
</div>
</div>
<div class="sect3">
<h3 id="_диктатор_и_помощники">Диктатор и помощники</h3>
<div class="paragraph">
<p>
Это вариант организации рабочего процесса с использованием нескольких репозиториев.
В основном такой подход используется на огромных проектах, насчитывающих сотни участников; самый известный пример — ядро Linux.
Помощники (lieutenants) — это интеграционные менеджеры, которые отвечают за отдельные части репозитория.
Над ними главенствует один диспетчер интеграции, которого называют великодушным диктатором.
Репозиторий доброжелательного диктатора выступает как эталонный (blessed), откуда все участники процесса должны получать изменения.
Процесс работает следующим образом (смотри <a href="{{< relurl "book/ru/v2/ch00/rwfdiag_c" >}}">Рабочий процесс с великодушным диктатором</a>):</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Обычные разработчики работают в своих тематических ветках и перебазируют свою работу относительно ветки <code>master</code>.
Ветка <code>master</code> — это ветка эталонного репозитория в которую имеет доступ только диктатор.</p>
</li>
<li>
<p>Помощники сливают тематические ветки разработчиков в свои ветки <code>master</code>.</p>
</li>
<li>
<p>Диктатор сливает ветки <code>master</code> помощников в свою ветку <code>master</code>.</p>
</li>
<li>
<p>Наконец, диктатор отправляет свою ветку <code>master</code> в эталонный репозиторий, чтобы все остальные могли перебазировать свою работу на основании неё.</p>
</li>
</ol>
</div>
<div id="rwfdiag_c" class="imageblock">
<div class="content">
<img src="{{< relurl "book/ru/v2/images/benevolent-dictator.png" >}}" alt="Рабочий процесс с великодушным диктатором">
</div>
<div class="title">Рисунок 55. Рабочий процесс с великодушным диктатором</div>
</div>
<div class="paragraph">
<p>Такой вид организации рабочего процесса не является обычным, но может быть применён к очень большим проектам или в сильно иерархической среде.
Это позволяет лидеру проекта (диктатору) делегировать бóльшую часть работы и собирать большие подмножества кода в различных точках до того как они будут интегрированы.</p>
</div>
</div>
<div class="sect3">
<h3 id="_patterns_for_managing_source_code_branches">Шаблоны для управления ветками исходного кода</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Примечание</div>
</td>
<td class="content">
<div class="paragraph">
<p>Мартин Фаулер сделал руководство «Шаблоны для управления ветками исходного кода».
Это руководство охватывает все стандартные рабочие процессы Git и объясняет, как и когда их использовать.
Также есть раздел, в котором сравнивается высокая и низкая частота слияния.</p>
</div>
<div class="paragraph">
<p><a href="https://martinfowler.com/articles/branching-patterns.html" class="bare" target="_blank" rel="noopener">https://martinfowler.com/articles/branching-patterns.html</a></p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h3 id="_заключение_5">Заключение</h3>
<div class="paragraph">
<p>Это наиболее часто используемые подходы в организации рабочего процесса на основании распределённых систем, таких как Git.
Но, как вы можете видеть, существует множество различных решений для организации рабочего процесса в реальных проектах.
Теперь, когда вы определились с комбинацией рабочих процессов, мы рассмотрим ряд более конкретных примеров как использовать основные роли в различных процессах.
В следующем разделе вы узнаете о некоторых основных моделях, описывающих процесс участия в проекте.</p>
</div>
</div>
<div id="nav"><a href="{{< previous-section >}}">prev</a> | <a href="{{< next-section >}}">next</a></div>